"use strict";(self["webpackChunkweb_shop_demo"]=self["webpackChunkweb_shop_demo"]||[]).push([[583],{8991:function(e,t,a){a.d(t,{Z:function(){return K}});var l=a(3396),r=a(7139),i=a(9242);const s={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},d={class:"modal-dialog modal-sm",role:"document"},n={class:"modal-content border-0"},o={class:"modal-header bg-danger text-white"},c={class:"modal-title",id:"exampleModalLabel"},m={key:0},p={key:1},u={key:2},h={key:3},g=(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),b={class:"modal-body"},_={key:0},w=(0,l.Uk)("是否要刪除文章"),v={class:"text-danger"},y=(0,l.Uk)("?"),k={key:1},f=(0,l.Uk)("是否要刪除優惠券"),M={class:"text-danger"},O=(0,l.Uk)("?"),x={key:2},D=(0,l.Uk)("是否要刪除產品"),z={class:"text-danger"},C=(0,l.Uk)("?"),U={key:3},$=(0,l.Uk)("是否要刪除訂單"),P={class:"text-danger"},Z=(0,l.Uk)("?"),L={class:"modal-footer"};function V(e,t,a,V,q,j){return(0,l.wg)(),(0,l.iD)("div",s,[(0,l._)("div",d,[(0,l._)("div",n,[(0,l._)("div",o,[(0,l._)("h5",c,[a.item.author?((0,l.wg)(),(0,l.iD)("span",m,"刪除文章 "+(0,r.zw)(a.item.title),1)):a.item.code?((0,l.wg)(),(0,l.iD)("span",p,"刪除優惠券 "+(0,r.zw)(a.item.title),1)):a.item.category?((0,l.wg)(),(0,l.iD)("span",u,"刪除產品 "+(0,r.zw)(a.item.title),1)):((0,l.wg)(),(0,l.iD)("span",h,"刪除訂單 "+(0,r.zw)(a.item.id),1))]),g]),(0,l._)("div",b,[a.item.author?((0,l.wg)(),(0,l.iD)("span",_,[w,(0,l._)("strong",v,(0,r.zw)(a.item.title),1),y])):a.item.code?((0,l.wg)(),(0,l.iD)("span",k,[f,(0,l._)("strong",M,(0,r.zw)(a.item.title),1),O])):a.item.category?((0,l.wg)(),(0,l.iD)("span",x,[D,(0,l._)("strong",z,(0,r.zw)(a.item.title),1),C])):((0,l.wg)(),(0,l.iD)("span",U,[$,(0,l._)("strong",P,(0,r.zw)(a.item.title),1),Z]))]),(0,l._)("div",L,[(0,l._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal",onClick:t[0]||(t[0]=(0,i.iM)(((...t)=>e.hideModal&&e.hideModal(...t)),["prevent"]))},"取消 "),a.item.author?((0,l.wg)(),(0,l.iD)("button",{key:0,type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(0,i.iM)((t=>e.$emit("delete-article",q.tempArticle)),["prevent"]))},"確認")):a.item.code?((0,l.wg)(),(0,l.iD)("button",{key:1,type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=(0,i.iM)((t=>e.$emit("delete-voucher",q.tempVoucher)),["prevent"]))},"確認")):a.item.category?((0,l.wg)(),(0,l.iD)("button",{key:2,type:"button",class:"btn btn-primary",onClick:t[3]||(t[3]=(0,i.iM)((t=>e.$emit("delete-product",q.tempProduct)),["prevent"]))},"確認")):((0,l.wg)(),(0,l.iD)("button",{key:3,type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=(0,i.iM)((t=>e.$emit("delete-order",q.tempOrder)),["prevent"]))},"確認"))])])])],512)}var q=a(1339),j={props:{item:{type:Object,default(){return{}}}},watch:{item(){this.item.author?this.tempArticle=this.item:this.item.code?this.tempVoucher=this.item:this.item.category?this.tempProduct=this.item:this.tempOrder=this.item}},data(){return{modal:{},tempProduct:{},tempOrder:{},tempVoucher:{},tempArticle:{}}},mixins:[q.Z]},H=a(89);const Y=(0,H.Z)(j,[["render",V]]);var K=Y},9637:function(e,t,a){a.d(t,{Z:function(){return _}});var l=a(3396),r=a(7139),i=a(9242);const s={"aria-label":"Page navigation example"},d={class:"pagination justify-content-center"},n=(0,l._)("span",{"aria-hidden":"true"},"«",-1),o=[n],c=["onClick"],m=(0,l._)("span",{"aria-hidden":"true"},"»",-1),p=[m];function u(e,t,a,n,m,u){return(0,l.wg)(),(0,l.iD)("nav",s,[(0,l._)("ul",d,[(0,l._)("li",{class:(0,r.C_)(["page-item",{disabled:!a.pages.has_pre}])},[(0,l._)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=(0,i.iM)((e=>u.changePage(-1)),["prevent"]))},o)],2),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.pages.total_pages,(e=>((0,l.wg)(),(0,l.iD)("li",{class:(0,r.C_)(["page-item",{active:e===a.pages.current_page}]),key:e},[(0,l._)("a",{class:"page-link",href:"#",onClick:(0,i.iM)((t=>u.updatePages(e)),["prevent"])},(0,r.zw)(e),9,c)],2)))),128)),(0,l._)("li",{class:(0,r.C_)(["page-item",{disabled:!a.pages.has_next}])},[(0,l._)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[1]||(t[1]=(0,i.iM)((e=>u.changePage(1)),["prevent"]))},p)],2)])])}var h={props:["pages"],methods:{updatePages(e){this.$emit("emit-pages",e)},changePage(e){this.$emit("emit-pages",this.pages.current_page+e)}}},g=a(89);const b=(0,g.Z)(h,[["render",u]]);var _=b},9583:function(e,t,a){a.r(t),a.d(t,{default:function(){return T}});var l=a(3396),r=a(7139),i=a(9242);const s={class:"container pt-3"},d={class:"table mt-5"},n=(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,"訂單日期"),(0,l._)("th",null,"電子信箱"),(0,l._)("th",null,"訂單內容"),(0,l._)("th",null,"訂單金額"),(0,l._)("th",null,"是否付款"),(0,l._)("th",null,"備註"),(0,l._)("th",null,"操作")])],-1),o={key:0,class:"fs-5 text-success"},c={key:1,class:"fs-5 text-danger"},m={class:"btn-group d-flex align-items-center"},p=["onClick"],u=["onClick"];function h(e,t,a,h,g,b){const _=(0,l.up)("loading-component"),w=(0,l.up)("pagination-bar"),v=(0,l.up)("order-modal"),y=(0,l.up)("del-modal");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(_,{active:g.isLoading},null,8,["active"]),(0,l._)("div",s,[(0,l._)("table",d,[n,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(g.orders,(t=>((0,l.wg)(),(0,l.iD)("tr",{key:t.id},[(0,l._)("td",null,(0,r.zw)(e.$filters.date(t.create_at)),1),(0,l._)("td",null,(0,r.zw)(t.user.email),1),(0,l._)("td",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.products,(e=>((0,l.wg)(),(0,l.iD)("ul",{key:e},[(0,l._)("li",null,(0,r.zw)(e.product.title)+" "+(0,r.zw)(e.qty)+" "+(0,r.zw)(e.product.unit),1)])))),128))]),(0,l._)("td",null,(0,r.zw)(e.$filters.currency(t.total))+"元",1),(0,l._)("td",null,[t.is_paid?((0,l.wg)(),(0,l.iD)("p",o,"已付款")):((0,l.wg)(),(0,l.iD)("p",c,"未付款"))]),(0,l._)("td",null,(0,r.zw)(t.message),1),(0,l._)("td",null,[(0,l._)("div",m,[(0,l._)("button",{class:"btn btn-primary",onClick:(0,i.iM)((e=>b.openModal(t)),["prevent"])},"詳細",8,p),(0,l._)("button",{class:"btn btn-danger",onClick:(0,i.iM)((e=>b.openModal(t,"delete")),["prevent"])},"刪除",8,u)])])])))),128))])])]),(0,l.Wm)(w,{pages:g.pagination,onEmitPages:b.getOrders},null,8,["pages","onEmitPages"]),(0,l.Wm)(v,{ref:"orderModal",order:g.tempOrder},null,8,["order"]),(0,l.Wm)(y,{ref:"delModal",item:g.tempOrder,onDeleteOrder:b.deleteOrder},null,8,["item","onDeleteOrder"])],64)}var g=a(9637);const b={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},_={class:"modal-dialog modal-xl",role:"document"},w={class:"modal-content border-0"},v={class:"modal-header bg-dark text-white"},y={class:"modal-title",id:"exampleModalLabel"},k=(0,l._)("span",null,"訂單詳細",-1),f=(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),M={class:"modal-body"},O={class:"row"},x={class:"col-sm-4"},D=(0,l.Uk)(" 用戶資料 "),z={class:"mb-3"},C=(0,l._)("label",{for:"name",class:"form-label"},"姓名",-1),U={class:"mb-3"},$=(0,l._)("label",{for:"email",class:"form-label"},"Email",-1),P={class:"mb-3"},Z=(0,l._)("label",{for:"phone",class:"form-label"},"電話",-1),L={class:"mt-5"},V=(0,l._)("label",{for:"address",class:"form-label"},"地址",-1),q={class:"col-sm-8"},j=(0,l.Uk)(" 訂單細節 "),H={class:"mb-3 d-flex justify-content-between"},Y={class:"border"},K=(0,l._)("hr",null,null,-1),W=(0,l.Uk)(" 總金額 "),A={class:"mb-3"},E={class:"modal-footer"};function B(e,t,a,s,d,n){return(0,l.wg)(),(0,l.iD)("div",b,[(0,l._)("div",_,[(0,l._)("div",w,[(0,l._)("div",v,[(0,l._)("h5",y,[k,(0,l.Uk)(" "+(0,r.zw)(d.tempOrder.id),1)]),f]),(0,l._)("div",M,[(0,l._)("div",O,[(0,l._)("div",x,[D,(0,l._)("div",z,[C,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",id:"name",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>d.tempOrder.user.name=e)},null,512),[[i.nr,d.tempOrder.user.name]])]),(0,l._)("div",U,[$,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",id:"email",required:"","onUpdate:modelValue":t[1]||(t[1]=e=>d.tempOrder.user.email=e)},null,512),[[i.nr,d.tempOrder.user.email]])]),(0,l._)("div",P,[Z,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",id:"phone",required:"","onUpdate:modelValue":t[2]||(t[2]=e=>d.tempOrder.user.tel=e)},null,512),[[i.nr,d.tempOrder.user.tel]])]),(0,l._)("div",L,[V,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",id:"address",required:"","onUpdate:modelValue":t[3]||(t[3]=e=>d.tempOrder.user.address=e)},null,512),[[i.nr,d.tempOrder.user.address]])])]),(0,l._)("div",q,[j,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(d.tempOrder.products,(t=>((0,l.wg)(),(0,l.iD)("div",{class:"row gx-2",key:t},[(0,l._)("div",H,[(0,l.Uk)((0,r.zw)(t.product.title)+" ",1),(0,l._)("div",Y,(0,r.zw)(t.qty)+" / "+(0,r.zw)(t.product.unit),1),(0,l.Uk)(" "+(0,r.zw)(e.$filters.currency(t.product.price))+" 元 ",1)]),K])))),128)),W,(0,l._)("div",A,(0,r.zw)(e.$filters.currency(d.tempOrder.total))+" 元 ",1)])])]),(0,l._)("div",E,[(0,l._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal",onClick:t[4]||(t[4]=(0,i.iM)(((...e)=>n.hideModal&&n.hideModal(...e)),["prevent"]))},"取消 "),(0,l._)("button",{type:"button",class:"btn btn-primary",onClick:t[5]||(t[5]=(0,i.iM)(((...e)=>n.hideModal&&n.hideModal(...e)),["prevent"]))},"確認")])])])],512)}var N=a(1339),S={props:{order:{type:Object,default(){return{}}}},watch:{order(){this.tempOrder=this.order}},data(){return{modal:{},tempOrder:{user:{name:""},products:{}},products:[]}},methods:{showModal(){this.modal.show()},hideModal(){this.modal.hide()}},mixins:[N.Z]},F=a(89);const G=(0,F.Z)(S,[["render",B]]);var I=G,J=a(8991),Q={data(){return{orders:[],pagination:{},tempOrder:{},isLoading:!1}},components:{PaginationBar:g.Z,OrderModal:I,DelModal:J.Z},inject:["emitter"],methods:{getOrders(e=1){const t=`https://vue3-course-api.hexschool.io/api/steven-vue3-demo/admin/orders?page=${e}`;this.isLoading=!0,this.$http.get(t).then((e=>{console.log(e.data.orders),this.isLoading=!1,e.data.success&&(this.orders=e.data.orders,this.pagination=e.data.pagination)}))},openModal(e,t){this.tempOrder={...e};let a=this.$refs.orderModal;"delete"===t&&(a=this.$refs.delModal),a.showModal()},deleteOrder(e){this.tempOrder=e;const t=`https://vue3-course-api.hexschool.io/api/steven-vue3-demo/admin/order/${e.id}`,a=this.$refs.delModal;this.$http.delete(t).then((e=>{this.$httpMessageState(e,"刪除訂單"),a.hideModal(),this.getOrders()}))}},created(){this.getOrders()}};const R=(0,F.Z)(Q,[["render",h]]);var T=R}}]);
//# sourceMappingURL=583.47d358aa.js.map