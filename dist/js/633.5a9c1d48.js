"use strict";(self["webpackChunkweb_shop_demo"]=self["webpackChunkweb_shop_demo"]||[]).push([[633],{5925:function(s,t,e){e.d(t,{Z:function(){return g}});var i=e(3396),o=e(7139);const n={class:"banner-small"},a=(0,i._)("div",{class:"banner-img active"},null,-1),l={class:"banner-title"};function r(s,t,e,r,c,d){return(0,i.wg)(),(0,i.iD)("div",n,[a,(0,i._)("h2",l,(0,o.zw)(e.msg.title),1)])}var c={props:["msg"]},d=e(89);const u=(0,d.Z)(c,[["render",r]]);var g=u},1633:function(s,t,e){e.r(t),e.d(t,{default:function(){return Y}});var i=e(3396),o=e(7139),n=e(9242);const a={class:"likes-list mt-5"},l={key:0,class:"row my-3"},r={class:"col-12 d-flex flex-column justify-content-center align-items-center border border-5 border-warning rounded",style:{height:"30vw"}},c=(0,i._)("h3",null," 目前沒有商品喔... ",-1),d=(0,i.Uk)("來去逛逛"),u={key:1,class:"row my-3"},g={class:"product-card"},p={class:"product-tag"},h=["onClick"],m={key:0,class:"bi bi-heart-fill likes"},k={key:1,class:"bi bi-heart likes"},b={class:"product-title"},v={class:"product-price px-2"},w={key:0,class:"h5"},y={key:1,class:"h6"},L={key:2,class:"h5 text-end"},f={class:"btn-group btn-group-sm w-100"},_=["onClick"],M=["disabled","onClick"],C={key:0,class:"spinner-border text-success spinner-grow-sm",role:"status"},D=(0,i._)("span",{class:"visually-hidden"},"Loading...",-1),I=[D],x=(0,i.Uk)(" 加入購物車 "),S={key:2,class:"d-flex justify-content-center align-items-center flex-column loading-block"},$=(0,i._)("strong",null,"Loading...",-1),Z=(0,i._)("div",{class:"spinner-border text-center",style:{width:"3rem",height:"3rem"},role:"status","aria-hidden":"true"},null,-1),q=[$,Z],z={class:"container"};function O(s,t,e,D,$,Z){const O=(0,i.up)("banner-component"),J=(0,i.up)("router-link"),N=(0,i.up)("product-card"),W=(0,i.up)("message-modal");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(O,{msg:$.msg},null,8,["msg"]),(0,i._)("div",a,[0==$.likes.length?((0,i.wg)(),(0,i.iD)("div",l,[(0,i._)("div",r,[c,(0,i.Wm)(J,{class:"btn btn-success",to:"/user/product"},{default:(0,i.w5)((()=>[d])),_:1})])])):((0,i.wg)(),(0,i.iD)("div",u,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)($.likes,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"col-12 col-xl-4 col-md-6 col-sm-12 mb-4",key:t.id},[(0,i._)("div",g,[(0,i._)("div",{class:"products-img",style:(0,o.j5)({backgroundImage:`url(${t.imageUrl})`})},[(0,i._)("div",p,(0,o.zw)(t.category),1),(0,i._)("button",{type:"button",class:"btn rounded-pill product-likes",onClick:(0,n.iM)((s=>Z.updateLikesList(t.id)),["prevent"])},[Z.isInLikeList(t.id)?((0,i.wg)(),(0,i.iD)("i",m)):((0,i.wg)(),(0,i.iD)("i",k))],8,h)],4),(0,i._)("div",b,(0,o.zw)(t.title),1),(0,i._)("div",v,[t.price?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",w,(0,o.zw)(s.$filters.currency(t.origin_price))+" 元",1)),t.price?((0,i.wg)(),(0,i.iD)("del",y,(0,o.zw)(s.$filters.currency(t.origin_price))+" 元",1)):(0,i.kq)("",!0),t.price?((0,i.wg)(),(0,i.iD)("div",L,(0,o.zw)(s.$filters.currency(t.price))+" 元",1)):(0,i.kq)("",!0)]),(0,i._)("div",f,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:(0,n.iM)((s=>Z.getProduct(t.id)),["prevent"])},"查看更多",8,_),(0,i._)("button",{type:"button",class:"btn btn-outline-success",disabled:this.status.loadingItem===t.id,onClick:(0,n.iM)((s=>Z.addCart(t)),["prevent"])},[this.status.loadingItem===t.id?((0,i.wg)(),(0,i.iD)("div",C,I)):(0,i.kq)("",!0),x],8,M)])])])))),128))])),$.isLoading?((0,i.wg)(),(0,i.iD)("div",S,q)):(0,i.kq)("",!0)]),(0,i._)("div",z,[(0,i.Wm)(N)]),(0,i.Wm)(W,{ref:"messageModal",msg:$.msgModal},null,8,["msg"])],64)}var J=e(5820),N=e(8905),W=e(5925),j=e(513),P=e(3782),U={data(){return{isLoading:!1,status:{loadingItem:""},products:[],likes:[],msg:{title:"我的最愛"},orderSearch:"",orderShow:!1,order:{user:{}},msgModal:{title:"找不到訂單...",success:""}}},components:{BannerComponent:W.Z,ProductCard:j.Z,MessageModal:P.Z},methods:{getLikesIdList:N.F,updateLikesList:N.b,isInLikeList(s){const t=this.getLikesIdList();return t.includes(s)},getLikes(){const s="https://vue3-course-api.hexschool.io/api/steven-vue3-demo/products/all";this.$http.get(s).then((s=>{console.log("items",s.data.products);const t=JSON.parse(JSON.stringify(s.data.products)),e=JSON.parse(localStorage.getItem("tacos-likesList"))||[],i=[];e.length>0&&(e.forEach((s=>{console.log(s),t.forEach((t=>{t.id===s&&i.push(t)}))})),this.likes=[...i],this.isLoading=!1)}))},updateLikes(s){this.isLoading=!0;const t=JSON.parse(localStorage.getItem("tacos-likesList"))||[];t.includes(s.id)?t.splice(t.indexOf(s.id),1):t.push(s.id),localStorage.setItem("tacos-likesList",t),J.Z.emit("updateLikes"),this.getLikes()},addCart(s){const t="https://vue3-course-api.hexschool.io/api/steven-vue3-demo/cart",e=this.$refs.messageModal;this.status.loadingItem=s.id;const i={product_id:s.id,qty:1};this.$http.post(t,{data:i}).then((t=>{this.msgModal.product=s,this.$httpMessageState(t,"加入購物車"),this.msgModal.success=t.data.success,this.msgModal.title=t.data.message,J.Z.emit("updateCart"),this.status.loadingItem="",e.showModal()}))},getProduct(s){this.$router.push(`/user/product/${s}`)}},created(){this.getLikes(),J.Z.on("updateLikes",(()=>{this.getLikes()}))}},E=e(89);const H=(0,E.Z)(U,[["render",O]]);var Y=H}}]);
//# sourceMappingURL=633.5a9c1d48.js.map