"use strict";(self["webpackChunkweb_shop_demo"]=self["webpackChunkweb_shop_demo"]||[]).push([[527],{339:function(t,e,a){a.d(e,{Z:function(){return g}});var s=a(3396),i=a(7139);const c={class:"banner-small"},n={class:"banner-title"};function r(t,e,a,r,o,l){return(0,s.wg)(),(0,s.iD)("div",c,[(0,s._)("h2",n,(0,i.zw)(a.msg.title),1)])}var o={props:["msg"]},l=a(89);const d=(0,l.Z)(o,[["render",r]]);var g=d},9637:function(t,e,a){a.d(e,{Z:function(){return b}});var s=a(3396),i=a(7139),c=a(9242);const n={"aria-label":"Page navigation example"},r={class:"pagination justify-content-center"},o=(0,s._)("span",{"aria-hidden":"true"},"«",-1),l=[o],d=["onClick"],g=(0,s._)("span",{"aria-hidden":"true"},"»",-1),u=[g];function p(t,e,a,o,g,p){return(0,s.wg)(),(0,s.iD)("nav",n,[(0,s._)("ul",r,[(0,s._)("li",{class:(0,i.C_)(["page-item",{disabled:!a.pages.has_pre}])},[(0,s._)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:e[0]||(e[0]=(0,c.iM)((t=>p.changePage(-1)),["prevent"]))},l)],2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.pages.total_pages,(t=>((0,s.wg)(),(0,s.iD)("li",{class:(0,i.C_)(["page-item",{active:t===a.pages.current_page}]),key:t},[(0,s._)("a",{class:"page-link",href:"#",onClick:(0,c.iM)((e=>p.updatePages(t)),["prevent"])},(0,i.zw)(t),9,d)],2)))),128)),(0,s._)("li",{class:(0,i.C_)(["page-item",{disabled:!a.pages.has_next}])},[(0,s._)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:e[1]||(e[1]=(0,c.iM)((t=>p.changePage(1)),["prevent"]))},u)],2)])])}var h={props:["pages"],methods:{updatePages(t){this.$emit("emit-pages",t)},changePage(t){this.$emit("emit-pages",this.pages.current_page+t)}}},v=a(89);const m=(0,v.Z)(h,[["render",p]]);var b=m},6527:function(t,e,a){a.r(e),a.d(e,{default:function(){return R}});var s=a(3396),i=a(7139),c=a(9242);const n={class:"row mt-3"},r={class:"col-12 col-md-3"},o={class:"side-bar mt-5"},l={class:"d-flex flex-column align-items-center justify-content-center"},d={class:"col-12 col-md-9"},g={class:"row mt-5"},u={key:0,class:"row filter-product"},p={class:"product-card"},h={class:"product-tag"},v={class:"product-title"},m={class:"product-price"},b={key:0,class:"h5"},_={key:1,class:"h6"},k={key:2,class:"h5 text-end"},w={class:"btn-group btn-group-sm w-100"},C=["onClick"],y=["disabled","onClick"],f={key:0,class:"spinner-border text-danger spinner-grow-sm",role:"status"},M=(0,s._)("span",{class:"visually-hidden"},"Loading...",-1),P=[M],D=(0,s.Uk)(" 加入購物車 "),$={key:1,class:"row"},z={class:"product-card"},S={class:"product-tag"},x={class:"product-title"},q={class:"product-price px-2"},T={key:0,class:"h5"},L={key:1,class:"h6"},Z={key:2,class:"h5 text-end"},I={class:"btn-group btn-group-sm w-100"},j=["onClick"],H=["disabled","onClick"],U={key:0,class:"spinner-border text-danger spinner-grow-sm",role:"status"},W=(0,s._)("span",{class:"visually-hidden"},"Loading...",-1),Y=[W],K=(0,s.Uk)(" 加入購物車 "),A={key:0,class:"col-12"};function B(t,e,a,M,W,B){const E=(0,s.up)("banner-component"),N=(0,s.up)("loading-component"),Q=(0,s.up)("pagination-bar"),F=(0,s.up)("message-modal");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(E,{msg:W.msg},null,8,["msg"]),(0,s._)("div",n,[(0,s._)("div",r,[(0,s._)("div",o,[(0,s._)("div",l,[(0,s._)("button",{class:(0,i.C_)(["btn tag-btn",{active:""==W.cacheSearch}]),onClick:e[0]||(e[0]=(0,c.iM)((t=>B.changeTag("")),["prevent"]))},"全部商品",2),(0,s._)("button",{class:(0,i.C_)(["btn tag-btn",{active:"taco"==W.cacheSearch}]),onClick:e[1]||(e[1]=(0,c.iM)((t=>B.changeTag("taco")),["prevent"]))},"Taco",2),(0,s._)("button",{class:(0,i.C_)(["btn tag-btn",{active:"quesadilla"==W.cacheSearch}]),onClick:e[2]||(e[2]=(0,c.iM)((t=>B.changeTag("quesadilla")),["prevent"]))},"Quesadilla",2),(0,s._)("button",{class:(0,i.C_)(["btn tag-btn",{active:"nachos"==W.cacheSearch}]),onClick:e[3]||(e[3]=(0,c.iM)((t=>B.changeTag("nachos")),["prevent"]))},"Nachos",2),(0,s._)("button",{class:(0,i.C_)(["btn tag-btn",{active:"pizza"==W.cacheSearch}]),onClick:e[4]||(e[4]=(0,c.iM)((t=>B.changeTag("pizza")),["prevent"]))},"Pizza",2),(0,s._)("button",{class:(0,i.C_)(["btn tag-btn",{active:"沙拉"==W.cacheSearch}]),onClick:e[5]||(e[5]=(0,c.iM)((t=>B.changeTag("沙拉")),["prevent"]))},"沙拉",2),(0,s._)("button",{class:(0,i.C_)(["btn tag-btn",{active:"炸物"==W.cacheSearch}]),onClick:e[6]||(e[6]=(0,c.iM)((t=>B.changeTag("炸物")),["prevent"]))},"炸物",2),(0,s._)("button",{class:(0,i.C_)(["btn tag-btn",{active:"主餐"==W.cacheSearch}]),onClick:e[7]||(e[7]=(0,c.iM)((t=>B.changeTag("主餐")),["prevent"]))},"主餐",2),(0,s._)("button",{class:(0,i.C_)(["btn tag-btn",{active:"飲料"==W.cacheSearch}]),onClick:e[8]||(e[8]=(0,c.iM)((t=>B.changeTag("飲料")),["prevent"]))},"飲料",2)])])]),(0,s._)("div",d,[(0,s.Wm)(N,{active:W.isLoading},null,8,["active"]),(0,s._)("div",g,[W.cacheSearch?((0,s.wg)(),(0,s.iD)("div",u,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(B.filterProduct,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"col-6 col-md-4 mb-4",key:e.id},[(0,s._)("div",p,[(0,s._)("div",{class:"product-img",style:(0,i.j5)([{backgroundImage:`url(${e.imageUrl})`},{height:"200px"}])},[(0,s._)("div",h,(0,i.zw)(e.category),1)],4),(0,s._)("div",v,(0,i.zw)(e.title),1),(0,s._)("div",m,[e.price?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",b,(0,i.zw)(t.$filters.currency(e.origin_price))+" 元",1)),e.price?((0,s.wg)(),(0,s.iD)("del",_,(0,i.zw)(t.$filters.currency(e.origin_price))+" 元",1)):(0,s.kq)("",!0),e.price?((0,s.wg)(),(0,s.iD)("div",k,(0,i.zw)(t.$filters.currency(e.price))+" 元",1)):(0,s.kq)("",!0)]),(0,s._)("div",w,[(0,s._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:(0,c.iM)((t=>B.getProduct(e.id)),["prevent"])},"查看更多",8,C),(0,s._)("button",{type:"button",class:"btn btn-outline-danger",disabled:this.status.loadingItem===e.id,onClick:(0,c.iM)((t=>B.addCart(e)),["prevent"])},[this.status.loadingItem===e.id?((0,s.wg)(),(0,s.iD)("div",f,P)):(0,s.kq)("",!0),D],8,y)])])])))),128))])):((0,s.wg)(),(0,s.iD)("div",$,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(W.products,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"col-6 col-md-4 mb-4",key:e.id},[(0,s._)("div",z,[(0,s._)("div",{class:"products-img",style:(0,i.j5)({backgroundImage:`url(${e.imageUrl})`})},[(0,s._)("div",S,(0,i.zw)(e.category),1)],4),(0,s._)("div",x,(0,i.zw)(e.title),1),(0,s._)("div",q,[e.price?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",T,(0,i.zw)(t.$filters.currency(e.origin_price))+" 元",1)),e.price?((0,s.wg)(),(0,s.iD)("del",L,(0,i.zw)(t.$filters.currency(e.origin_price))+" 元",1)):(0,s.kq)("",!0),e.price?((0,s.wg)(),(0,s.iD)("div",Z,(0,i.zw)(t.$filters.currency(e.price))+" 元",1)):(0,s.kq)("",!0)]),(0,s._)("div",I,[(0,s._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:(0,c.iM)((t=>B.getProduct(e.id)),["prevent"])},"查看更多",8,j),(0,s._)("button",{type:"button",class:"btn btn-outline-danger",disabled:this.status.loadingItem===e.id,onClick:(0,c.iM)((t=>B.addCart(e)),["prevent"])},[this.status.loadingItem===e.id?((0,s.wg)(),(0,s.iD)("div",U,Y)):(0,s.kq)("",!0),K],8,H)])])])))),128))]))])]),W.cacheSearch?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",A,[(0,s.Wm)(Q,{pages:W.pagination,onEmitPages:B.getProducts},null,8,["pages","onEmitPages"])]))]),(0,s.Wm)(F,{ref:"messageModal",msg:W.msgModal},null,8,["msg"])],64)}var E=a(339),N=a(5820),Q=a(9637),F=a(3782),G={data(){return{allProducts:[],products:[],product:{},status:{loadingItem:""},isLoading:!1,pagination:{},cacheSearch:"",msg:{title:"精選美味"},msgModal:{title:"加入購物車",product:{},success:"",qty:1}}},components:{BannerComponent:E.Z,PaginationBar:Q.Z,MessageModal:F.Z},provide(){return{emitter:N.Z}},computed:{filterProduct(){return this.allProducts.filter((t=>t.category.match(this.cacheSearch)))}},methods:{getAllProducts(){const t="https://vue3-course-api.hexschool.io/api/steven-vue3-demo/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{this.allProducts=t.data.products,this.isLoading=!1}))},getProducts(t=1){const e=`https://vue3-course-api.hexschool.io/api/steven-vue3-demo/products/?page=${t}`;this.isLoading=!0,this.$http.get(e).then((t=>{this.products=t.data.products,this.pagination=t.data.pagination,this.isLoading=!1}))},getProduct(t){this.$router.push(`/user/product/${t}`)},addCart(t){const e="https://vue3-course-api.hexschool.io/api/steven-vue3-demo/cart",a=this.$refs.messageModal;this.status.loadingItem=t.id;const s={product_id:t.id,qty:1};this.$http.post(e,{data:s}).then((e=>{this.msgModal.product=t,this.$httpMessageState(e,"加入購物車"),this.msgModal.success=e.data.success,this.msgModal.title=e.data.message,N.Z.emit("updateCart"),this.status.loadingItem="",this.getCart(),a.showModal()}))},getCart(){const t="https://vue3-course-api.hexschool.io/api/steven-vue3-demo/cart";this.isLoading=!0,this.$http.get(t).then((t=>{this.cart=t.data.data,this.isLoading=!1,this.cartShow=!1,t.data.data.carts.length>0&&(this.cartShow=!0)}))},changeTag(t){this.cacheSearch=t}},created(){this.getAllProducts(),this.getProducts()}},J=a(89);const O=(0,J.Z)(G,[["render",B]]);var R=O}}]);
//# sourceMappingURL=527.7f4c231f.js.map