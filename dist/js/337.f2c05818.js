"use strict";(self["webpackChunkweb_shop_demo"]=self["webpackChunkweb_shop_demo"]||[]).push([[337],{9637:function(t,e,a){a.d(e,{Z:function(){return _}});var i=a(3396),s=a(7139),n=a(9242);const c={"aria-label":"Page navigation example"},r={class:"pagination justify-content-center"},o=(0,i._)("span",{"aria-hidden":"true"},"«",-1),l=[o],d=["onClick"],g=(0,i._)("span",{"aria-hidden":"true"},"»",-1),u=[g];function p(t,e,a,o,g,p){return(0,i.wg)(),(0,i.iD)("nav",c,[(0,i._)("ul",r,[(0,i._)("li",{class:(0,s.C_)(["page-item",{disabled:!a.pages.has_pre}])},[(0,i._)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:e[0]||(e[0]=(0,n.iM)((t=>p.changePage(-1)),["prevent"]))},l)],2),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.pages.total_pages,(t=>((0,i.wg)(),(0,i.iD)("li",{class:(0,s.C_)(["page-item",{active:t===a.pages.current_page}]),key:t},[(0,i._)("a",{class:"page-link",href:"#",onClick:(0,n.iM)((e=>p.updatePages(t)),["prevent"])},(0,s.zw)(t),9,d)],2)))),128)),(0,i._)("li",{class:(0,s.C_)(["page-item",{disabled:!a.pages.has_next}])},[(0,i._)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:e[1]||(e[1]=(0,n.iM)((t=>p.changePage(1)),["prevent"]))},u)],2)])])}var h={props:["pages"],methods:{updatePages(t){this.$emit("emit-pages",t)},changePage(t){this.$emit("emit-pages",this.pages.current_page+t)}}},v=a(89);const b=(0,v.Z)(h,[["render",p]]);var _=b},9337:function(t,e,a){a.r(e),a.d(e,{default:function(){return R}});var i=a(3396),s=a(7139),n=a(9242);const c={class:"product-banner"},r={class:"banner-title"},o={class:"row mt-3"},l={class:"col-12 col-md-3"},d={class:"sticky-top mt-5 pt-5"},g={class:"d-flex flex-column align-items-center justify-content-center"},u={class:"col-12 col-md-9"},p={class:"row mt-5"},h={key:0,class:"row filter-product"},v={class:"product-card"},b={class:"product-tag"},_={class:"product-title"},k={class:"product-price"},m={key:0,class:"h5"},w={key:1,class:"h6"},y={key:2,class:"h5 text-end"},C={class:"btn-group btn-group-sm w-100"},P=["onClick"],f=["disabled","onClick"],D={key:0,class:"spinner-border text-danger spinner-grow-sm",role:"status"},$=(0,i._)("span",{class:"visually-hidden"},"Loading...",-1),M=[$],z=(0,i.Uk)(" 加入購物車 "),x={key:1,class:"row"},q={class:"product-card"},L={class:"product-tag"},T={class:"product-title"},I={class:"product-price"},S={key:0,class:"h5"},Z={key:1,class:"h6"},j={key:2,class:"h5 text-end"},H={class:"btn-group btn-group-sm w-100"},U=["onClick"],Y=["disabled","onClick"],K={key:0,class:"spinner-border text-danger spinner-grow-sm",role:"status"},A=(0,i._)("span",{class:"visually-hidden"},"Loading...",-1),E=[A],N=(0,i.Uk)(" 加入購物車 "),W={key:0,class:"col-12"};function B(t,e,a,$,A,B){const Q=(0,i.up)("loading-component"),F=(0,i.up)("pagination-bar");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",c,[(0,i._)("h2",r,(0,s.zw)(A.msgProduct.title1),1)]),(0,i._)("div",o,[(0,i._)("div",l,[(0,i._)("div",d,[(0,i._)("div",g,[(0,i._)("button",{class:"btn tag-btn",onClick:e[0]||(e[0]=(0,n.iM)((t=>this.cacheSearch=""),["prevent"]))},"全部商品"),(0,i._)("button",{class:"btn tag-btn",onClick:e[1]||(e[1]=(0,n.iM)((t=>B.changeTag("taco")),["prevent"]))},"Taco"),(0,i._)("button",{class:"btn tag-btn",onClick:e[2]||(e[2]=(0,n.iM)((t=>B.changeTag("quesadilla")),["prevent"]))},"Quesadilla"),(0,i._)("button",{class:"btn tag-btn",onClick:e[3]||(e[3]=(0,n.iM)((t=>B.changeTag("nachos")),["prevent"]))},"Nachos"),(0,i._)("button",{class:"btn tag-btn",onClick:e[4]||(e[4]=(0,n.iM)((t=>B.changeTag("Pizza")),["prevent"]))},"Pizza"),(0,i._)("button",{class:"btn tag-btn",onClick:e[5]||(e[5]=(0,n.iM)((t=>B.changeTag("沙拉")),["prevent"]))},"沙拉"),(0,i._)("button",{class:"btn tag-btn",onClick:e[6]||(e[6]=(0,n.iM)((t=>B.changeTag("炸物")),["prevent"]))},"炸物"),(0,i._)("button",{class:"btn tag-btn",onClick:e[7]||(e[7]=(0,n.iM)((t=>B.changeTag("主餐")),["prevent"]))},"主餐"),(0,i._)("button",{class:"btn tag-btn",onClick:e[8]||(e[8]=(0,n.iM)((t=>B.changeTag("飲料")),["prevent"]))},"飲料")])])]),(0,i._)("div",u,[(0,i.Wm)(Q,{active:A.isLoading},null,8,["active"]),(0,i._)("div",p,[A.cacheSearch?((0,i.wg)(),(0,i.iD)("div",h,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(B.filterProduct,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"col-6 col-md-4 mb-4",key:e.id},[(0,i._)("div",v,[(0,i._)("div",{class:"product-img",style:(0,s.j5)({backgroundImage:`url(${e.imageUrl})`})},[(0,i._)("div",b,(0,s.zw)(e.category),1)],4),(0,i._)("div",_,(0,s.zw)(e.title),1),(0,i._)("div",k,[e.price?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",m,(0,s.zw)(t.$filters.currency(e.origin_price))+" 元",1)),e.price?((0,i.wg)(),(0,i.iD)("del",w,(0,s.zw)(t.$filters.currency(e.origin_price))+" 元",1)):(0,i.kq)("",!0),e.price?((0,i.wg)(),(0,i.iD)("div",y,(0,s.zw)(t.$filters.currency(e.price))+" 元",1)):(0,i.kq)("",!0)]),(0,i._)("div",C,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:(0,n.iM)((t=>B.getProduct(e.id)),["prevent"])},"查看更多",8,P),(0,i._)("button",{type:"button",class:"btn btn-outline-danger",disabled:this.status.loadingItem===e.id,onClick:(0,n.iM)((t=>B.addCart(e.id)),["prevent"])},[this.status.loadingItem===e.id?((0,i.wg)(),(0,i.iD)("div",D,M)):(0,i.kq)("",!0),z],8,f)])])])))),128))])):((0,i.wg)(),(0,i.iD)("div",x,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(A.products,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"col-6 col-md-4 mb-4",key:e.id},[(0,i._)("div",q,[(0,i._)("div",{class:"product-img",style:(0,s.j5)({backgroundImage:`url(${e.imageUrl})`})},[(0,i._)("div",L,(0,s.zw)(e.category),1)],4),(0,i._)("div",T,(0,s.zw)(e.title),1),(0,i._)("div",I,[e.price?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",S,(0,s.zw)(t.$filters.currency(e.origin_price))+" 元",1)),e.price?((0,i.wg)(),(0,i.iD)("del",Z,(0,s.zw)(t.$filters.currency(e.origin_price))+" 元",1)):(0,i.kq)("",!0),e.price?((0,i.wg)(),(0,i.iD)("div",j,(0,s.zw)(t.$filters.currency(e.price))+" 元",1)):(0,i.kq)("",!0)]),(0,i._)("div",H,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:(0,n.iM)((t=>B.getProduct(e.id)),["prevent"])},"查看更多",8,U),(0,i._)("button",{type:"button",class:"btn btn-outline-danger",disabled:this.status.loadingItem===e.id,onClick:(0,n.iM)((t=>B.addCart(e.id)),["prevent"])},[this.status.loadingItem===e.id?((0,i.wg)(),(0,i.iD)("div",K,E)):(0,i.kq)("",!0),N],8,Y)])])])))),128))]))])]),A.cacheSearch?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",W,[(0,i.Wm)(F,{pages:A.pagination,onEmitPages:B.getProducts},null,8,["pages","onEmitPages"])]))])],64)}var Q=a(5820),F=a(9637),G={data(){return{allProducts:[],products:[],product:{},status:{loadingItem:""},isLoading:!1,pagination:{},cacheSearch:"",msgProduct:{title1:"精選美味",title2:"美墨快餐車",content:"美味、方便、快速",link:"趕快上車",router:"product"}}},components:{PaginationBar:F.Z},provide(){return{emitter:Q.Z}},computed:{filterProduct(){return this.allProducts.filter((t=>t.category.match(this.cacheSearch)))}},methods:{getAllProducts(){const t="https://vue3-course-api.hexschool.io/api/steven-vue3-demo/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{this.allProducts=t.data.products,this.isLoading=!1}))},getProducts(t=1){const e=`https://vue3-course-api.hexschool.io/api/steven-vue3-demo/products/?page=${t}`;this.isLoading=!0,this.$http.get(e).then((t=>{this.products=t.data.products,this.pagination=t.data.pagination,this.isLoading=!1}))},getProduct(t){this.$router.push(`/user/product/${t}`)},addCart(t){const e="https://vue3-course-api.hexschool.io/api/steven-vue3-demo/cart";this.status.loadingItem=t;const a={product_id:t,qty:1};this.$http.post(e,{data:a}).then((t=>{this.$httpMessageState(t,"加入購物車"),Q.Z.emit("updateCart"),this.status.loadingItem="",this.getCart()}))},getCart(){const t="https://vue3-course-api.hexschool.io/api/steven-vue3-demo/cart";this.isLoading=!0,this.$http.get(t).then((t=>{this.cart=t.data.data,this.isLoading=!1,this.cartShow=!1,t.data.data.carts.length>0&&(this.cartShow=!0)}))},changeTag(t){this.cacheSearch=t}},created(){this.getAllProducts(),this.getProducts()}},J=a(89);const O=(0,J.Z)(G,[["render",B]]);var R=O}}]);
//# sourceMappingURL=337.f2c05818.js.map