"use strict";(self["webpackChunkweb_shop_demo"]=self["webpackChunkweb_shop_demo"]||[]).push([[770],{9401:function(e,t,l){l.r(t),l.d(t,{default:function(){return I}});var r=l(3396),d=l(7139),a=l(9242);const s={class:"container pt-3"},o={class:"table mt-5"},n=(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",null,"訂單日期"),(0,r._)("th",null,"電子信箱"),(0,r._)("th",null,"訂單內容"),(0,r._)("th",null,"訂單金額"),(0,r._)("th",null,"是否付款"),(0,r._)("th",null,"備註"),(0,r._)("th",null,"操作")])],-1),i={class:"btn-group d-flex align-items-center"},u=["onClick"],c=["onClick"];function m(e,t,l,m,p,h){const _=(0,r.up)("loading-component"),b=(0,r.up)("pagination-bar"),g=(0,r.up)("order-modal"),w=(0,r.up)("del-modal");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(_,{active:p.isLoading},null,8,["active"]),(0,r._)("div",s,[(0,r._)("table",o,[n,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(p.orders,(t=>((0,r.wg)(),(0,r.iD)("tr",{key:t.id},[(0,r._)("td",null,(0,d.zw)(e.$filters.date(t.create_at)),1),(0,r._)("td",null,(0,d.zw)(t.user.email),1),(0,r._)("td",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.products,(e=>((0,r.wg)(),(0,r.iD)("ul",{key:e},[(0,r._)("li",null,(0,d.zw)(e.product.title)+" "+(0,d.zw)(e.qty)+" "+(0,d.zw)(e.product.unit),1)])))),128))]),(0,r._)("td",null,(0,d.zw)(e.$filters.currency(t.total))+"元",1),(0,r._)("td",null,(0,d.zw)(t.is_paid),1),(0,r._)("td",null,(0,d.zw)(t.message),1),(0,r._)("td",null,[(0,r._)("div",i,[(0,r._)("button",{class:"btn btn-primary",onClick:(0,a.iM)((e=>h.openModal(t)),["prevent"])},"詳細",8,u),(0,r._)("button",{class:"btn btn-danger",onClick:(0,a.iM)((e=>h.openModal(t,"delete")),["prevent"])},"刪除",8,c)])])])))),128))])])]),(0,r.Wm)(b,{pages:p.pagination,onEmitPages:h.getOrders},null,8,["pages","onEmitPages"]),(0,r.Wm)(g,{ref:"orderModal",order:p.tempOrder},null,8,["order"]),(0,r.Wm)(w,{ref:"delModal",item:p.tempOrder,onDeleteOrder:h.deleteOrder},null,8,["item","onDeleteOrder"])],64)}var p=l(9637);const h={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},_={class:"modal-dialog modal-xl",role:"document"},b={class:"modal-content border-0"},g=(0,r._)("div",{class:"modal-header bg-dark text-white"},[(0,r._)("h5",{class:"modal-title",id:"exampleModalLabel"},[(0,r._)("span",null,"訂單詳細")]),(0,r._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),w={class:"modal-body"},v={class:"row"},f={class:"col-sm-4"},y=(0,r.Uk)(" 用戶資料 "),O={class:"mb-3"},M=(0,r._)("label",{for:"name",class:"form-label"},"姓名",-1),k={class:"mb-3"},x=(0,r._)("label",{for:"email",class:"form-label"},"Email",-1),z={class:"mb-3"},$=(0,r._)("label",{for:"phone",class:"form-label"},"電話",-1),D={class:"mt-5"},C=(0,r._)("label",{for:"address",class:"form-label"},"地址",-1),U={class:"col-sm-8"},q=(0,r.Uk)(" 訂單細節 "),L={class:"mb-3 d-flex justify-content-between"},Z={class:"border"},H=(0,r._)("hr",null,null,-1),V=(0,r.Uk)(" 總金額 "),W={class:"mb-3"},Y={class:"modal-footer"};function j(e,t,l,s,o,n){return(0,r.wg)(),(0,r.iD)("div",h,[(0,r._)("div",_,[(0,r._)("div",b,[g,(0,r._)("div",w,[(0,r._)("div",v,[(0,r._)("div",f,[y,(0,r._)("div",O,[M,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control",id:"name",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>o.tempOrder.user.name=e)},null,512),[[a.nr,o.tempOrder.user.name]])]),(0,r._)("div",k,[x,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control",id:"email",required:"","onUpdate:modelValue":t[1]||(t[1]=e=>o.tempOrder.user.email=e)},null,512),[[a.nr,o.tempOrder.user.email]])]),(0,r._)("div",z,[$,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control",id:"phone",required:"","onUpdate:modelValue":t[2]||(t[2]=e=>o.tempOrder.user.tel=e)},null,512),[[a.nr,o.tempOrder.user.tel]])]),(0,r._)("div",D,[C,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control",id:"address",required:"","onUpdate:modelValue":t[3]||(t[3]=e=>o.tempOrder.user.address=e)},null,512),[[a.nr,o.tempOrder.user.address]])])]),(0,r._)("div",U,[q,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.tempOrder.products,(t=>((0,r.wg)(),(0,r.iD)("div",{class:"row gx-2",key:t},[(0,r._)("div",L,[(0,r.Uk)((0,d.zw)(t.product.title)+" ",1),(0,r._)("div",Z,(0,d.zw)(t.qty)+" / "+(0,d.zw)(t.product.unit),1),(0,r.Uk)(" "+(0,d.zw)(e.$filters.currency(t.product.price))+" 元 ",1)]),H])))),128)),V,(0,r._)("div",W,(0,d.zw)(e.$filters.currency(o.tempOrder.total))+" 元 ",1)])])]),(0,r._)("div",Y,[(0,r._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal",onClick:t[4]||(t[4]=(0,a.iM)(((...e)=>n.hideModal&&n.hideModal(...e)),["prevent"]))},"取消 "),(0,r._)("button",{type:"button",class:"btn btn-primary",onClick:t[5]||(t[5]=(0,a.iM)(((...e)=>n.hideModal&&n.hideModal(...e)),["prevent"]))},"確認")])])])],512)}var E=l(1339),K={props:{order:{type:Object,default(){return{}}}},watch:{order(){this.tempOrder=this.order}},data(){return{modal:{},tempOrder:{user:{name:""},products:{}},products:[]}},methods:{showModal(){this.modal.show()},hideModal(){this.modal.hide()}},mixins:[E.Z]},P=l(89);const B=(0,P.Z)(K,[["render",j]]);var S=B,A=l(8991),F={data(){return{orders:[],pagination:{},tempOrder:{},isLoading:!1}},components:{PaginationBar:p.Z,OrderModal:S,DelModal:A.Z},inject:["emitter"],methods:{getOrders(e=1){const t=`https://vue3-course-api.hexschool.io/api/steven-vue3-demo/admin/orders?page=${e}`;this.isLoading=!0,this.$http.get(t).then((e=>{console.log(e.data.orders),this.isLoading=!1,e.data.success&&(this.orders=e.data.orders,this.pagination=e.data.pagination)}))},openModal(e,t){this.tempOrder={...e};let l=this.$refs.orderModal;"delete"===t&&(l=this.$refs.delModal),l.showModal()},deleteOrder(e){this.tempOrder=e;const t=`https://vue3-course-api.hexschool.io/api/steven-vue3-demo/admin/order/${e.id}`,l=this.$refs.delModal;this.$http.delete(t).then((e=>{this.$httpMessageState(e,"刪除訂單"),l.hideModal(),this.getOrders()}))}},created(){this.getOrders()}};const G=(0,P.Z)(F,[["render",m]]);var I=G}}]);
//# sourceMappingURL=770.71201dc4.js.map