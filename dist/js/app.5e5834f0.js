(function(){"use strict";var t={4118:function(t,e,s){var n=s(9242),o=s(6265),a=s.n(o),i=s(6423),r=s(6216);function l(t){const e=new Date(1e3*t);return e.toLocaleDateString()}function c(t){const e=parseInt(t,10);return`${e.toFixed(0).replace(/./g,((t,e,s)=>e&&"."!==t&&(s.length-e)%3===0?`, ${t}`.replace(/\s/g,""):t))}`}var d=s(5820);function u(t,e="更新"){if(t.data.success)d.Z.emit("push-message",{style:"success",title:`${e}成功`});else{const s="string"===typeof t.data.message?[t.data.message]:t.data.message;d.Z.emit("push-message",{style:"danger",title:`${e}失敗`,content:s.join("、")})}}var p=s(5708),m=s(3990),h=s(579),g=s(2389),f=s(3396);function v(t,e){const s=(0,f.up)("router-view");return(0,f.wg)(),(0,f.j4)(s)}var b=s(89);const w={},_=(0,b.Z)(w,[["render",v]]);var k=_,y=s(678),L=s(7139);const C={class:"banner"},x={class:"img-carousel"},M=(0,f._)("ul",{class:"img-carousel-list"},[(0,f._)("li",{class:"bg-1"})],-1),D={class:"title mb-1"},Z=(0,f._)("i",{class:"bi bi-arrow-down-short"},null,-1),S={class:"my-5",id:"product-card"},W={class:"container"},$={class:"my-5 py-5",id:"news"},z={class:"container"},U={class:"my-5 py-5",id:"location"},E={class:"container"},O={class:"contact"},N={class:"img-carousel"},j=(0,f._)("ul",{class:"img-carousel-list"},[(0,f._)("li",{class:"bg-1 animate"}),(0,f._)("li",{class:"bg-2 animate"})],-1),I={class:"title mb-1"},P={class:"input-group mb-3"},q=["onClick"],A={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},T=(0,f.Uk)(" 訂閱 "),B=(0,f._)("div",{class:"loading-icon"},null,-1),F=(0,f._)("p",{class:"fs-1"},"Loading...",-1),H=[B,F];function Y(t,e,s,n,o,a){const i=(0,f.up)("navbar-component"),r=(0,f.up)("router-link"),l=(0,f.up)("product-card"),c=(0,f.up)("news-section"),d=(0,f.up)("location-section"),u=(0,f.up)("vee-field"),p=(0,f.up)("error-message"),m=(0,f.up)("vee-form"),h=(0,f.up)("message-modal"),g=(0,f.up)("footer-component");return(0,f.wg)(),(0,f.iD)(f.HY,null,[(0,f.Wm)(i),(0,f._)("section",C,[(0,f._)("div",x,[M,(0,f._)("div",D,[(0,f._)("h2",null,(0,L.zw)(o.msg.title1),1),(0,f._)("h4",null,(0,L.zw)(o.msg.title2),1),(0,f._)("h5",null,(0,L.zw)(o.msg.content),1),(0,f.Wm)(r,{class:"btn btn-success",to:"/user/product"},{default:(0,f.w5)((()=>[(0,f.Uk)((0,L.zw)(o.msg.btn),1)])),_:1})]),Z])]),(0,f._)("section",S,[(0,f._)("div",W,[(0,f.Wm)(l)])]),(0,f._)("section",$,[(0,f._)("div",z,[(0,f.Wm)(c)])]),(0,f._)("section",U,[(0,f._)("div",E,[(0,f.Wm)(d)])]),(0,f._)("section",O,[(0,f._)("div",N,[j,(0,f._)("div",I,[(0,f._)("h2",null,(0,L.zw)(o.contact.title),1),(0,f.Wm)(m,{ref:"contactForm",class:"w-100",onSubmit:a.sendEmail},{default:(0,f.w5)((({errors:t,validate:s})=>[(0,f._)("div",P,[(0,f.Wm)(u,{name:"email",type:"email",modelValue:o.contact.userEmail,"onUpdate:modelValue":e[0]||(e[0]=t=>o.contact.userEmail=t),rules:"email|required",class:(0,L.C_)([{"is-invalid":t["email"]},"form-control"]),placeholder:"輸入您的Email","aria-label":"輸入您的Email","aria-describedby":"button-addon2"},null,8,["modelValue","class"]),(0,f._)("button",{class:"btn btn-success",type:"submit",id:"button-addon2",onClick:s},[o.contact.loading?((0,f.wg)(),(0,f.iD)("span",A)):(0,f.kq)("",!0),T],8,q),(0,f.Wm)(p,{name:"email",class:"invalid-feedback"})])])),_:1},8,["onSubmit"])])])]),(0,f.Wm)(h,{ref:"messageModal",msg:o.msgModal},null,8,["msg"]),(0,f.Wm)(g),(0,f._)("div",{class:(0,L.C_)(["loading",{none:!o.isLoading}])},H,2)],64)}var V=s(5982),J=s(334),K=s(513),R=s.p+"img/car-2.5590e91d.jpg",G=s(154);const Q=(0,f._)("h3",{class:"section-title location"},"發車資訊",-1),X=(0,f._)("div",{class:"row py-5"},[(0,f._)("div",{class:"col-12 col-md-6"},[(0,f._)("div",{id:"address"},[(0,f._)("div",{class:"card"},[(0,f._)("img",{src:R,class:"card-img-top",alt:"..."}),(0,f._)("div",{class:"card-body"},[(0,f._)("h5",{class:"card-title"},[(0,f._)("img",{src:G,alt:"",class:"logo"}),(0,f.Uk)(" 塔可餅車車")]),(0,f._)("p",{class:"card-text ps-5"},[(0,f.Uk)("本車位置: 台中市西屯區中科路2966號周邊 "),(0,f._)("br"),(0,f._)("small",{class:"text-muted"},"(隨老闆心情更換位置)")]),(0,f._)("p",{class:"card-text ps-5"},[(0,f.Uk)("本車電話:0912-345-678 "),(0,f._)("br"),(0,f._)("small",{class:"text-muted"},"(隨老闆心情接電話)")]),(0,f._)("p",{class:"card-text ps-5"},[(0,f.Uk)("發車時間:09:00 ~ 20:00 ，週三公休 "),(0,f._)("br"),(0,f._)("small",{class:"text-muted"},"(隨老闆心情開店)")])])])])]),(0,f._)("div",{class:"col-12 col-md-6 my-md-0 my-sm-5 iframe-maps"},[(0,f._)("iframe",{src:"https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d5000.802794333556!2d120.65662839665806!3d24.18164790307173!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1szh-TW!2stw!4v1654572679375!5m2!1szh-TW!2stw",width:"100%",height:"100%",style:{border:"0"},allowfullscreen:"",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade"})])],-1);function tt(t,e){return(0,f.wg)(),(0,f.iD)(f.HY,null,[Q,X],64)}const et={},st=(0,b.Z)(et,[["render",tt]]);var nt=st;const ot=(0,f._)("h3",{class:"section-title news"},"最新消息",-1),at={class:"row position-relative py-5"},it={class:"table table-light table-striped"},rt={width:"50"},lt={key:0,class:"text-danger"},ct={class:"text-end mt-5"},dt=(0,f.Uk)("更多消息?");function ut(t,e,s,n,o,a){const i=(0,f.up)("router-link");return(0,f.wg)(),(0,f.iD)(f.HY,null,[ot,(0,f._)("div",at,[(0,f._)("table",it,[(0,f._)("tbody",null,[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(o.news,((e,s)=>((0,f.wg)(),(0,f.iD)("tr",{key:e},[(0,f._)("td",null,(0,L.zw)(t.$filters.date(e.create_at)),1),(0,f._)("td",null,(0,L.zw)(e.tag),1),(0,f._)("td",rt,[s<1?((0,f.wg)(),(0,f.iD)("span",lt,"New!!")):(0,f.kq)("",!0)]),(0,f._)("td",null,(0,L.zw)(e.title),1)])))),128))])]),(0,f._)("div",ct,[(0,f.Wm)(i,{class:"btn-more",to:"/user/news"},{default:(0,f.w5)((()=>[dt])),_:1})])])],64)}var pt={data(){return{news:{}}},methods:{getNews(t=1){const e=`https://vue3-course-api.hexschool.io/api/steven-vue3-demo/articles?page=${t}`;this.isLoading=!0,this.$http.get(e).then((t=>{this.isLoading=!1,t.data.success&&(this.news=t.data.articles)}))}},created(){this.getNews()}};const mt=(0,b.Z)(pt,[["render",ut]]);var ht=mt,gt=s(3782),ft=s(4294),vt={data(){return{isLogin:!1,isLoading:!0,msg:{title1:"特製辣醬",title2:"濃濃的墨西哥風情，在舌尖上綻放。每一口都是熱情奔放的滋味。",content:"從經典到創新，口味百變，總能給你驚喜！",btn:"趕快上車"},contact:{title:"訂閱我們以獲得更多優惠資訊",userEmail:"",loading:!1},msgModal:{title:"訂閱",success:""}}},components:{NavbarComponent:V.Z,FooterComponent:J.Z,ProductCard:K.Z,LocationSection:nt,NewsSection:ht,MessageModal:gt.Z},methods:{async sendEmail(){if(this.contact.loading=!0,ft.ZP.init("Rkbad069ixZyz3Swq"),null!=this.contact.userEmail){const t={userEmail:this.contact.userEmail,message:"訂閱就送5折優惠碼",code:"121212"},e="service_pnfbezk",s="template_35p9dkk",n="Rkbad069ixZyz3Swq";ft.ZP.send(e,s,t,n).then((t=>{t.status&&(this.showMsgModal(!0,"訂閱成功"),this.$refs.contactForm.resetForm(),this.contact.userEmail="")}),(t=>{t&&this.showMsgModal(!1,"訂閱失敗")})),this.contact.loading=!1}},showMsgModal(t,e){const s=this.$refs.messageModal;this.msgModal.success=t,this.msgModal.title=e,s.showModal()}},mounted(){setTimeout((()=>{this.isLoading=!1}),3e3)},provide(){return{emitter:d.Z}}};const bt=(0,b.Z)(vt,[["render",Y]]);var wt=bt;const _t=[{path:"/",name:"home",component:wt,meta:{title:"塔可餅車車"}},{path:"/login",component:()=>s.e(403).then(s.bind(s,2403)),meta:{title:"後臺登入"}},{path:"/dashboard",component:()=>s.e(662).then(s.bind(s,1662)),meta:{title:"後臺"},children:[{path:"products",component:()=>s.e(433).then(s.bind(s,7433)),meta:{title:"後臺 - 產品列表"}},{path:"orders",component:()=>s.e(583).then(s.bind(s,9583)),meta:{title:"後臺 - 訂單列表"}},{path:"vouchers",component:()=>s.e(101).then(s.bind(s,4101)),meta:{title:"後臺 - 優惠券列表"}},{path:"articles",component:()=>s.e(957).then(s.bind(s,1957)),meta:{title:"後臺 - 最新消息列表"}}]},{path:"/user",component:()=>s.e(629).then(s.bind(s,5629)),children:[{path:"cart",component:()=>s.e(883).then(s.bind(s,883)),meta:{title:"塔可餅車車 - 購物車"}},{path:"product",component:()=>s.e(224).then(s.bind(s,5224)),meta:{title:"塔可餅車車 - 美味精選"}},{path:"product/:productId",component:()=>s.e(801).then(s.bind(s,3242)),meta:{title:"塔可餅車車 - 美味精選"}},{path:"orders",component:()=>s.e(520).then(s.bind(s,4520)),meta:{title:"塔可餅車車 - 訂單查詢"}},{path:"likes",component:()=>s.e(633).then(s.bind(s,1633)),meta:{title:"塔可餅車車 - 訂單查詢"}},{path:"checkout/:orderId",component:()=>s.e(279).then(s.bind(s,279)),meta:{title:"塔可餅車車 - 結帳頁"}},{path:"story",component:()=>s.e(293).then(s.bind(s,3293)),meta:{title:"塔可餅車車 - 車車故事"}},{path:"news",component:()=>s.e(199).then(s.bind(s,1199)),meta:{title:"塔可餅車車 - 最新消息"}}]}],kt=(0,y.p7)({history:(0,y.r5)(),routes:_t,linkActiveClass:"active"});kt.beforeEach(((t,e,s)=>{t.meta.title&&(document.title=t.meta.title),s()}));var yt=kt,Lt=s(65),Ct=(0,Lt.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,p.aH)("required",m.C1),(0,p.aH)("email",m.Do),(0,p.aH)("min",m.VV),(0,p.jQ)({generateMessage:(0,h.NC)({zh_TW:g}),validateOnInput:!0}),(0,h.i_)("zh_TW");const xt=(0,n.ri)(k);xt.config.globalProperties.$filters={currency:c,date:l},xt.config.globalProperties.$httpMessageState=u,xt.use(i.Z,a()),xt.use(Ct),xt.use(yt),xt.component("LoadingComponent",r.Z),xt.component("VeeForm",p.l0),xt.component("VeeField",p.gN),xt.component("ErrorMessage",p.Bc),xt.mount("#app")},5820:function(t,e,s){var n=s(1373);const o=(0,n.Z)();e["Z"]=o},8905:function(t,e,s){s.d(e,{F:function(){return o},b:function(){return a}});var n=s(5820);function o(){const t=JSON.parse(localStorage.getItem("tacos-likesList"))||[];return t}function a(t){const e=JSON.parse(localStorage.getItem("tacos-likesList"))||[];e.includes(t)?e.splice(e.indexOf(t),1):e.push(t),localStorage.setItem("tacos-likesList",JSON.stringify(e)),n.Z.emit("updateLikes")}},1339:function(t,e,s){var n=s(7972),o=s.n(n);e["Z"]={methods:{showModal(){this.modal.show()},hideModal(){this.modal.hide()}},mounted(){this.modal=new(o())(this.$refs.modal)}}},334:function(t,e,s){s.d(e,{Z:function(){return p}});var n=s(3396);const o={class:"py-3"},a=(0,n._)("span",null,[(0,n.Uk)(" 本網站僅為個人練習，非商業使用。素材取自"),(0,n._)("a",{href:"https://unsplash.com"},"unsplash"),(0,n.Uk)("、LOGO由 Twitter, "),(0,n._)("a",{href:"https://creativecommons.org/licenses/by/4.0",title:"Creative Commons Attribution 4.0"},"CC BY 4.0"),(0,n.Uk)(", "),(0,n._)("a",{href:"https://commons.wikimedia.org/w/index.php?curid=59969682"},"連結")],-1),i=(0,n._)("span",null,"Copyright © 2022 Choo Choo Tacos",-1),r=(0,n.Uk)("後台展示");function l(t,e){const s=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("footer",o,[a,i,(0,n.Wm)(s,{to:"/login"},{default:(0,n.w5)((()=>[r])),_:1})])}var c=s(89);const d={},u=(0,c.Z)(d,[["render",l]]);var p=u},3782:function(t,e,s){s.d(e,{Z:function(){return Z}});var n=s(3396),o=s(7139),a=s(9242);const i={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},r={class:"modal-dialog modal-dialog-centered modal-sm",role:"document"},l={class:"modal-content border-0"},c={class:"modal-title",id:"exampleModalLabel"},d=(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),u={class:"modal-body"},p={key:0,class:"row"},m={key:0,class:"my-3"},h=(0,n._)("div",{class:"logo-icon"},null,-1),g={class:"fs-2 text-center"},f={class:"fs-5 text-center"},v={key:1,class:"my-3"},b={class:"fs-2 text-center"},w={key:1,class:"row"},_={class:"my-3"},k={class:"fs-2 text-center"},y={class:"modal-footer"};function L(t,e,s,L,C,x){return(0,n.wg)(),(0,n.iD)("div",i,[(0,n._)("div",r,[(0,n._)("div",l,[(0,n._)("div",{class:(0,o.C_)(["modal-header text-white",{"bg-success":s.msg.success,"bg-danger":!s.msg.success}])},[(0,n._)("h5",c,[(0,n._)("span",null,(0,o.zw)(s.msg.title),1)]),d],2),(0,n._)("div",u,[s.msg.product?((0,n.wg)(),(0,n.iD)("div",p,[s.msg.success?((0,n.wg)(),(0,n.iD)("div",m,[h,(0,n._)("p",g,(0,o.zw)(s.msg.product.title),1),(0,n._)("p",f,(0,o.zw)(s.msg.qty)+" / "+(0,o.zw)(s.msg.product.unit),1)])):((0,n.wg)(),(0,n.iD)("div",v,[(0,n._)("p",b,(0,o.zw)(s.msg.product.title),1)]))])):((0,n.wg)(),(0,n.iD)("div",w,[(0,n._)("div",_,[(0,n._)("p",k,(0,o.zw)(s.msg.title),1)])]))]),(0,n._)("div",y,[(0,n._)("button",{type:"button",class:(0,o.C_)(["btn btn-success",{"btn-success":s.msg.success,"btn-danger":!s.msg.success}]),onClick:e[0]||(e[0]=(0,a.iM)(((...e)=>t.hideModal&&t.hideModal(...e)),["prevent"]))},"確認",2)])])])],512)}var C=s(1339),x={props:{msg:{type:Object,default(){return{}}}},data(){return{modal:{}}},mixins:[C.Z]},M=s(89);const D=(0,M.Z)(x,[["render",L]]);var Z=D},5982:function(t,e,s){s.d(e,{Z:function(){return gt}});var n=s(3396),o=s(7139),a=s(9242),i=s(154);const r={class:"container"},l=(0,n._)("img",{class:"logo",src:i,alt:"由 Twitter, CC BY 4.0, https://commons.wikimedia.org/w/index.php?curid=59969682"},null,-1),c=(0,n.Uk)(" 塔可餅車車 "),d=(0,n._)("span",{class:"navbar-toggler-icon"},null,-1),u=[d],p={key:0,class:"collapse navbar-collapse",id:"navbarNavDropdown"},m={class:"navbar-nav w-100"},h={class:"nav-item"},g=(0,n.Uk)("前台"),f={class:"nav-item"},v=(0,n.Uk)("產品列表"),b={class:"nav-item"},w=(0,n.Uk)("訂單列表"),_={class:"nav-item"},k=(0,n.Uk)("優惠券列表"),y={class:"nav-item"},L=(0,n.Uk)("消息列表"),C={class:"nav-item dropdown ms-auto"},x={key:0},M={key:1,class:"navbar-collapse",id:"navbarNavDropdown"},D={class:"nav-item px-3"},Z=(0,n.Uk)("美味精選"),S={class:"nav-item px-3"},W=(0,n.Uk)("車車故事"),$={class:"nav-item px-3"},z=(0,n.Uk)("優惠資訊"),U={class:"nav-item px-3"},E=(0,n.Uk)("訂單查詢");function O(t,e,s,i,d,O){const N=(0,n.up)("router-link"),j=(0,n.up)("dropdown-likes"),I=(0,n.up)("dropdown-cart");return(0,n.wg)(),(0,n.iD)("nav",{class:(0,o.C_)(["navbar navbar-expand-lg fixed-top",d.active?"navbar-dark bg-dark":"navbar-unactive"])},[(0,n._)("div",r,[(0,n.Wm)(N,{class:"navbar-brand",to:"/"},{default:(0,n.w5)((()=>[l,c])),_:1}),(0,n._)("button",{class:"navbar-toggler",type:"button",onClick:e[0]||(e[0]=(0,a.iM)((t=>O.dropdown("dropdownNav")),["prevent"]))},u),s.isLogin?((0,n.wg)(),(0,n.iD)("div",p,[(0,n._)("ul",m,[(0,n._)("li",h,[(0,n.Wm)(N,{class:"nav-link",to:"/"},{default:(0,n.w5)((()=>[g])),_:1})]),(0,n._)("li",f,[(0,n.Wm)(N,{class:"nav-link",to:"/dashboard/products"},{default:(0,n.w5)((()=>[v])),_:1})]),(0,n._)("li",b,[(0,n.Wm)(N,{class:"nav-link",to:"/dashboard/orders"},{default:(0,n.w5)((()=>[w])),_:1})]),(0,n._)("li",_,[(0,n.Wm)(N,{class:"nav-link",to:"/dashboard/vouchers"},{default:(0,n.w5)((()=>[k])),_:1})]),(0,n._)("li",y,[(0,n.Wm)(N,{class:"nav-link",to:"/dashboard/articles"},{default:(0,n.w5)((()=>[L])),_:1})]),(0,n._)("li",C,[(0,n._)("button",{class:"btn btn-secondary dropdown-toggle",type:"button",onClick:e[1]||(e[1]=(0,a.iM)((t=>O.dropdown("dropdownAdmin")),["prevent"]))}," 使用者 "),(0,n._)("ul",{class:(0,o.C_)(["dropdown-menu",{show:d.dropdownAdmin}])},[s.isLogin?((0,n.wg)(),(0,n.iD)("li",x,[(0,n._)("a",{class:"dropdown-item",onClick:e[2]||(e[2]=(0,a.iM)(((...t)=>O.logout&&O.logout(...t)),["prevent"]))},"Logout")])):(0,n.kq)("",!0)],2)])])])):((0,n.wg)(),(0,n.iD)("div",M,[(0,n._)("ul",{class:(0,o.C_)(["navbar-nav w-100 justify-content-center align-items-center",{show:d.dropdownNav}])},[(0,n._)("li",D,[(0,n.Wm)(N,{class:"nav-link",to:"/user/product"},{default:(0,n.w5)((()=>[Z])),_:1})]),(0,n._)("li",S,[(0,n.Wm)(N,{class:"nav-link",to:"/user/story"},{default:(0,n.w5)((()=>[W])),_:1})]),(0,n._)("li",$,[(0,n.Wm)(N,{class:"nav-link",to:"/user/news"},{default:(0,n.w5)((()=>[z])),_:1})]),(0,n._)("li",U,[(0,n.Wm)(N,{class:"nav-link",to:"/user/orders"},{default:(0,n.w5)((()=>[E])),_:1})])],2)])),(0,n.Wm)(j,{active:d.active},null,8,["active"]),(0,n.Wm)(I,{active:d.active},null,8,["active"])])],2)}const N={class:"btn-group dropdown cart-menu ms-auto me-2"},j={key:0,class:"bi bi-heart"},I=(0,n._)("i",{class:"bi bi-heart-fill likes"},null,-1),P={class:"badge rounded-pill bg-danger"};function q(t,e,s,a,i,r){const l=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",N,[(0,n.Wm)(l,{class:(0,o.C_)(["btn rounded",s.active?"btn-dark":""]),to:"/user/likes"},{default:(0,n.w5)((()=>[0==i.likesLength?((0,n.wg)(),(0,n.iD)("i",j)):((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[I,(0,n._)("span",P,(0,o.zw)(i.likesLength),1)],64))])),_:1},8,["class"])])}var A=s(5820),T=s(8905),B={data(){return{dropdownBtn:!1,likes:[],likesLength:0}},props:{active:{type:Boolean,default(){return!1}}},methods:{getLikesIdList:T.F,dropdown(){this.dropdownBtn?this.dropdownBtn=!1:this.dropdownBtn=!0},getLikes(){const t=this.getLikesIdList();this.likes=t,this.likesLength=t.length},updateLikes(t){const e=JSON.parse(localStorage.getItem("tacos-likesList"))||[];e.includes(t.id)?e.splice(e.indexOf(t.id),1):e.push(t.id),localStorage.setItem("tacos-likesList",e),this.getLikes()},deleteLikes(t){const e=`https://vue3-course-api.hexschool.io/api/steven-vue3-demo/cart/${t}`;this.isLoading=!0,this.$http.delete(e).then((t=>{this.isLoading=!1,this.getLikes()}))}},created(){this.getLikes(),A.Z.on("updateLikes",(()=>{this.getLikes()}))}},F=s(89);const H=(0,F.Z)(B,[["render",q]]);var Y=H;const V={class:"btn-group dropdown cart-menu me-2"},J=(0,n._)("i",{class:"bi bi-cart-fill"},null,-1),K={key:0,class:"badge rounded-pill bg-danger"},R={key:0,class:"dropdown-item d-flex justify-content-center"},G=(0,n._)("li",{class:"dropdown-item d-flex justify-content-center border-bottom bg-warning text-white"},[(0,n._)("i",{class:"bi bi-cart-fill me-2"}),(0,n.Uk)(" 購物車 ")],-1),Q={class:"dropdown-item d-flex justify-content-between align-items-center"},X=["onClick"],tt={class:"fs-7 m-0"},et={class:"input-group w-50"},st=["onUpdate:modelValue","onChange"],nt={class:"input-group-text"},ot=(0,n._)("hr",null,null,-1),at={class:"dropdown-item d-flex justify-content-between"},it=(0,n._)("p",null,"小計",-1),rt=(0,n._)("p",null,"元",-1),lt=(0,n.Uk)("前往結帳");function ct(t,e,s,i,r,l){const c=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",V,[(0,n._)("button",{type:"button",class:(0,o.C_)(["btn rounded",s.active?"btn-dark":""]),onClick:e[0]||(e[0]=(0,a.iM)(((...t)=>l.dropdown&&l.dropdown(...t)),["prevent"]))},[J,r.cartLength>0?((0,n.wg)(),(0,n.iD)("span",K,(0,o.zw)(r.cartLength),1)):(0,n.kq)("",!0)],2),(0,n._)("ul",{class:(0,o.C_)(["dropdown-menu mt-5 me-5 cart-list py-0",{show:r.dropdownBtn}])},[r.cartShow?((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[G,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.cart.carts,(t=>((0,n.wg)(),(0,n.iD)("li",{key:t.id},[(0,n._)("div",Q,[(0,n._)("button",{class:"btn btn-outline-danger",type:"button",onClick:(0,a.iM)((e=>l.deleteCart(t.id)),["prevent"])},"X",8,X),(0,n._)("p",tt,(0,o.zw)(t.product.title),1),(0,n._)("div",et,[(0,n.wy)((0,n._)("input",{class:"form-control",min:"1",type:"number","onUpdate:modelValue":e=>t.qty=e,onChange:e=>l.updateCart(t)},null,40,st),[[a.nr,t.qty]]),(0,n._)("div",nt,"/ "+(0,o.zw)(t.product.unit),1)])])])))),128)),ot,(0,n._)("li",at,[it,(0,n._)("p",null,(0,o.zw)(t.$filters.currency(r.cart.total)),1),rt]),(0,n.Wm)(c,{class:(0,o.C_)(["btn w-100 mt-2",s.active?"btn-dark":"btn-light"]),to:"/user/cart",onClick:(0,a.iM)(l.dropdown,["prevent"])},{default:(0,n.w5)((()=>[lt])),_:1},8,["class","onClick"])],64)):((0,n.wg)(),(0,n.iD)("li",R," 目前購物車是空的喔! "))],2)])}var dt={data(){return{dropdownBtn:!1,cart:{},cartShow:!1,cartLength:0}},watch:{cartLength(){this.cartShow=!1,this.cartLength>0&&(this.cartShow=!0)}},props:{active:{type:Boolean,default(){return!1}}},methods:{dropdown(){this.dropdownBtn?this.dropdownBtn=!1:this.dropdownBtn=!0},getCart(){const t="https://vue3-course-api.hexschool.io/api/steven-vue3-demo/cart";this.isLoading=!0,this.$http.get(t).then((t=>{this.cart=t.data.data,this.cartLength=t.data.data.carts.length,this.$emit("emit-cartlength",this.cartLength),this.isLoading=!1,this.cartShow=!1,t.data.data.carts.length>0&&(this.cartShow=!0)}))},updateCart(t){const e=`https://vue3-course-api.hexschool.io/api/steven-vue3-demo/cart/${t.id}`,s={product_id:t.product_id,qty:t.qty};this.isLoading=!0,this.$http.put(e,{data:s}).then((t=>{this.isLoading=!1,this.getCart()}))},deleteCart(t){const e=`https://vue3-course-api.hexschool.io/api/steven-vue3-demo/cart/${t}`;this.isLoading=!0,this.$http.delete(e).then((t=>{this.isLoading=!1,this.getCart()}))}},created(){this.getCart(),A.Z.on("updateCart",(()=>{this.getCart()}))}};const ut=(0,F.Z)(dt,[["render",ct]]);var pt=ut,mt={props:["isLogin"],components:{DropdownLikes:Y,DropdownCart:pt},data(){return{active:!1,dropdownAdmin:!1,dropdownNav:!1}},methods:{handleScroll(){window.scrollY<=0&&(this.active=!1),window.scrollY>0&&(this.active=!0)},dropdown(t){"dropdownAdmin"===t?this.dropdownAdmin?this.dropdownAdmin=!1:this.dropdownAdmin=!0:"dropdownNav"===t&&(this.dropdownNav?this.dropdownNav=!1:this.dropdownNav=!0)},logout(){const t="https://vue3-course-api.hexschool.io/logout";this.$http.post(t,this.user).then((t=>{t.data.success&&this.$router.push("/login")}))}},created(){window.addEventListener("scroll",this.handleScroll)}};const ht=(0,F.Z)(mt,[["render",O]]);var gt=ht},513:function(t,e,s){s.d(e,{Z:function(){return U}});var n=s(3396),o=s(7139),a=s(9242);const i=(0,n._)("h3",{class:"section-title"},"美味推薦",-1),r={class:"row py-5"},l={class:"card rounded-3 text-white mt-3"},c={class:"card-img-overlay"},d={class:"card-title"},u={class:"card-text text-truncate"},p={class:"d-flex justify-content-between align-items-center mb-1"},m=["onClick"],h={key:0,class:"bi bi-heart-fill likes"},g={key:1,class:"bi bi-heart likes"},f={class:"card-text text-end"},v={class:"btn-group btn-group-sm"},b=["onClick"],w=["disabled","onClick"],_={key:0,class:"spinner-border text-danger spinner-grow-sm",role:"status"},k=(0,n._)("span",{class:"visually-hidden"},"Loading...",-1),y=[k],L=(0,n._)("i",{class:"bi bi-cart-plus"},null,-1),C={class:"text-end mt-5"},x=(0,n.Uk)("更多選擇?");function M(t,e,s,k,M,D){const Z=(0,n.up)("router-link"),S=(0,n.up)("message-modal");return(0,n.wg)(),(0,n.iD)(n.HY,null,[i,(0,n._)("div",r,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(M.tempProducts,(e=>((0,n.wg)(),(0,n.iD)("div",{key:e.id,class:"col-6 col-md-4 col-lg-3"},[(0,n._)("div",l,[(0,n._)("div",{class:"product-img rounded-3",style:(0,o.j5)({backgroundImage:`url( ${e.imageUrl} )`})},null,4),(0,n._)("div",c,[(0,n._)("h5",d,(0,o.zw)(e.title),1),(0,n._)("p",u,(0,o.zw)(e.description),1),(0,n._)("div",p,[(0,n._)("button",{type:"button",class:"btn btn-light rounded-pill",onClick:(0,a.iM)((t=>D.updateLikesList(e.id)),["prevent"])},[D.isInLikeList(e.id)?((0,n.wg)(),(0,n.iD)("i",h)):((0,n.wg)(),(0,n.iD)("i",g))],8,m),(0,n._)("p",f,"$ "+(0,o.zw)(t.$filters.currency(e.price)),1)]),(0,n._)("div",v,[(0,n._)("button",{type:"button",class:"btn btn-warning",onClick:(0,a.iM)((t=>D.getProduct(e.id)),["prevent"])}," 詳細 ",8,b),(0,n._)("button",{type:"button",class:"btn btn-success",disabled:this.status.loadingItem===e.id,onClick:(0,a.iM)((t=>D.addCart(e)),["prevent"])},[this.status.loadingItem===e.id?((0,n.wg)(),(0,n.iD)("div",_,y)):(0,n.kq)("",!0),L],8,w)])])])])))),128)),(0,n._)("div",C,[(0,n.Wm)(Z,{class:"btn-more",to:"/user/product"},{default:(0,n.w5)((()=>[x])),_:1})])]),(0,n.Wm)(S,{ref:"messageModal",msg:M.msg},null,8,["msg"])],64)}var D=s(5820),Z=s(8905),S=s(3782),W={data(){return{products:[],tempProducts:[],likeProduct:!1,status:{loadingItem:""},msg:{title:"加入購物車",product:{},success:"",qty:1}}},components:{MessageModal:S.Z},methods:{getLikesIdList:Z.F,updateLikesList:Z.b,isInLikeList(t){const e=this.getLikesIdList();return e.includes(t)},getProducts(){const t="https://vue3-course-api.hexschool.io/api/steven-vue3-demo/products/all";this.isLoading=!0;const e=[];this.$http.get(t).then((t=>{this.products=t.data.products;for(let s=0;s<=3;s++)e.push(this.products[s]);this.tempProducts=e,this.isLoading=!1}))},getProduct(t){this.$router.push(`/user/product/${t}`)},addCart(t){const e="https://vue3-course-api.hexschool.io/api/steven-vue3-demo/cart",s=this.$refs.messageModal;this.status.loadingItem=t.id;const n={product_id:t.id,qty:1};this.msg.product=t,this.$http.post(e,{data:n}).then((t=>{this.msg.success=t.data.success,this.msg.title=t.data.message,this.msg.qty=1,t.data.success&&(D.Z.emit("updateCart"),this.status.loadingItem="",s.showModal())}))}},created(){this.getProducts(),D.Z.on("updateLikes",(()=>{this.getProducts()}))}},$=s(89);const z=(0,$.Z)(W,[["render",M]]);var U=z},154:function(t,e,s){t.exports=s.p+"img/taco.bb77fc9f.svg"}},e={};function s(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(a.exports,a,a.exports,s),a.loaded=!0,a.exports}s.m=t,function(){s.amdO={}}(),function(){var t=[];s.O=function(e,n,o,a){if(!n){var i=1/0;for(d=0;d<t.length;d++){n=t[d][0],o=t[d][1],a=t[d][2];for(var r=!0,l=0;l<n.length;l++)(!1&a||i>=a)&&Object.keys(s.O).every((function(t){return s.O[t](n[l])}))?n.splice(l--,1):(r=!1,a<i&&(i=a));if(r){t.splice(d--,1);var c=o();void 0!==c&&(e=c)}}return e}a=a||0;for(var d=t.length;d>0&&t[d-1][2]>a;d--)t[d]=t[d-1];t[d]=[n,o,a]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var n in e)s.o(e,n)&&!s.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){s.f={},s.e=function(t){return Promise.all(Object.keys(s.f).reduce((function(e,n){return s.f[n](t,e),e}),[]))}}(),function(){s.u=function(t){return"js/"+t+"."+{101:"c5fee903",199:"e07c8c5b",224:"cb61fce4",279:"0c86fad7",293:"7f28e419",403:"1f4f0e12",433:"40fa7439",520:"27f99ea1",583:"a4397088",629:"e4776e99",633:"5a9c1d48",662:"4bea14b4",801:"4431c970",883:"d5f9999c",957:"be4c272c"}[t]+".js"}}(),function(){s.miniCssF=function(t){return"css/"+t+"."+{101:"9adfb6ff",199:"80dadfc7",224:"ba39f6a4",293:"5620f82a",403:"e63dd69d",433:"9adfb6ff",520:"798eb962",583:"9adfb6ff",629:"27f7d333",633:"96b07fe5",801:"e280f9ed",883:"831d985f",957:"9adfb6ff"}[t]+".css"}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.hmd=function(t){return t=Object.create(t),t.children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t}}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="web-shop-demo:";s.l=function(n,o,a,i){if(t[n])t[n].push(o);else{var r,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==e+a){r=u;break}}r||(l=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,s.nc&&r.setAttribute("nonce",s.nc),r.setAttribute("data-webpack",e+a),r.src=n),t[n]=[o];var p=function(e,s){r.onerror=r.onload=null,clearTimeout(m);var o=t[n];if(delete t[n],r.parentNode&&r.parentNode.removeChild(r),o&&o.forEach((function(t){return t(s)})),e)return e(s)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=p.bind(null,r.onerror),r.onload=p.bind(null,r.onload),l&&document.head.appendChild(r)}}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.p="/web-shop-demo/dist/"}(),function(){var t=function(t,e,s,n){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css";var a=function(a){if(o.onerror=o.onload=null,"load"===a.type)s();else{var i=a&&("load"===a.type?"missing":a.type),r=a&&a.target&&a.target.href||e,l=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=i,l.request=r,o.parentNode.removeChild(o),n(l)}};return o.onerror=o.onload=a,o.href=e,document.head.appendChild(o),o},e=function(t,e){for(var s=document.getElementsByTagName("link"),n=0;n<s.length;n++){var o=s[n],a=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(a===t||a===e))return o}var i=document.getElementsByTagName("style");for(n=0;n<i.length;n++){o=i[n],a=o.getAttribute("data-href");if(a===t||a===e)return o}},n=function(n){return new Promise((function(o,a){var i=s.miniCssF(n),r=s.p+i;if(e(i,r))return o();t(n,r,o,a)}))},o={143:0};s.f.miniCss=function(t,e){var s={101:1,199:1,224:1,293:1,403:1,433:1,520:1,583:1,629:1,633:1,801:1,883:1,957:1};o[t]?e.push(o[t]):0!==o[t]&&s[t]&&e.push(o[t]=n(t).then((function(){o[t]=0}),(function(e){throw delete o[t],e})))}}(),function(){var t={143:0};s.f.j=function(e,n){var o=s.o(t,e)?t[e]:void 0;if(0!==o)if(o)n.push(o[2]);else{var a=new Promise((function(s,n){o=t[e]=[s,n]}));n.push(o[2]=a);var i=s.p+s.u(e),r=new Error,l=function(n){if(s.o(t,e)&&(o=t[e],0!==o&&(t[e]=void 0),o)){var a=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;r.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",r.name="ChunkLoadError",r.type=a,r.request=i,o[1](r)}};s.l(i,l,"chunk-"+e,e)}},s.O.j=function(e){return 0===t[e]};var e=function(e,n){var o,a,i=n[0],r=n[1],l=n[2],c=0;if(i.some((function(e){return 0!==t[e]}))){for(o in r)s.o(r,o)&&(s.m[o]=r[o]);if(l)var d=l(s)}for(e&&e(n);c<i.length;c++)a=i[c],s.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return s.O(d)},n=self["webpackChunkweb_shop_demo"]=self["webpackChunkweb_shop_demo"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=s.O(void 0,[998],(function(){return s(4118)}));n=s.O(n)})();
//# sourceMappingURL=app.5e5834f0.js.map